(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,a){},40:function(e,t,a){e.exports=a(79)},71:function(e,t,a){},74:function(e,t,a){},77:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(34),l=a(84),s=a(86),o=a(82),i=a(7),u=a(21),d=a(13),h=a(18),m=a(17),p=a.n(m),g=a(37),b={deck:"",foundCard:{name:"",colors:[]},loading:!1,currentUser:{username:"",decks:[]},loggedIn:!1},E=Object(h.c)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_LOADING":return Object(d.a)({},e,{loading:!0});case"GET_CARD":return Object(d.a)({},e,{foundCard:t.card,loading:!1});case"CREATE_DECK":return Object(d.a)({},e,{deck:t.deck});case"ADD_TO_DECK":return console.log("PrevState: ",e.currentUser.decks[0].cards),Object(d.a)({},e,{currentUser:Object(d.a)({},e.currentUser,{decks:e.currentUser.decks.map(function(e){return e._id===t.deck_id?Object(d.a)({},e,{cards:Object(u.a)(e.cards).concat([t.card])}):e})}),loading:!1});case"SAVE_DECK":return Object(d.a)({},e,{decks:t.decks});case"LOGIN":return Object(d.a)({},e,{loggedIn:!0,currentUser:Object(d.a)({},e.user,t.user),loading:!1});case"LOGOUT":return Object(d.a)({},e,{loggedIn:!1,currentUser:{username:""},loading:!1});case"CREATE_USER":return Object(d.a)({},e,{username:t.user,decks:[],loading:!1});default:return e}},Object(h.a)(g.a));E.subscribe(function(){return console.log(E.getState())});var f=function(){for(var e="https://api.magicthegathering.io/v1/cards?random=true&pageSize=1",t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return a&&a.map(function(t){return e+="&"+t.name+"="+t.value}),function(t){console.log("dis: ",t),E.dispatch({type:"START_LOADING"}),p.a.get(e).then(function(e){var t={};e.data.cards.length>0&&(t={id:e.data.cards[0].id,name:e.data.cards[0].name,colors:e.data.cards[0].colors||[],manaCost:e.data.cards[0].manaCost,types:e.data.cards[0].types,description:e.data.cards[0].text,power:e.data.cards[0].power,toughness:e.data.cards[0].toughness,image:e.data.cards[0].imageUrl}),E.dispatch({type:"GET_CARD",card:t})})}},O=function(e,t){return console.log("Card: ",e," DECK ID: ",t),function(a){E.dispatch({type:"ADD_TO_DECK",card:e,deck_id:t})}},k=function(e){return function(t){p.a.post("/api/v1/users/",{username:e}).then(function(e){e&&E.dispatch({type:"LOGIN",user:e.data})})}},v=function(){return function(e){E.dispatch({type:"LOGOUT"})}},j=E,C=a(26),y=a.n(C),I=a(38),D=a(4),U=a(5),L=a(8),w=a(6),N=a(9),S=a(81),A=a(85),T=(a(71),function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(L.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,loggedIn:!1,currentUser:""},a}return Object(N.a)(t,e),Object(U.a)(t,[{key:"componentDidMount",value:function(){var e=Object(I.a)(y.a.mark(function e(){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState={loading:!1,currentUser:this.props.currentUser,loggedIn:this.props.loggedIn};case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(S.a,{to:"/"},r.a.createElement("b",null,"Home"))),r.a.createElement("li",null),r.a.createElement("li",null,r.a.createElement(S.a,{to:"/decks"},r.a.createElement("b",null,this.props.currentUser.username))),r.a.createElement("li",null,this.props.loggedIn?r.a.createElement("a",{onClick:v()},r.a.createElement("b",null,"Logout")):r.a.createElement(S.a,{to:"/"},r.a.createElement("b",null,"Login"))))}}]),t}(n.Component)),_=Object(A.a)(Object(i.b)(function(e){return e},function(e){return{logout:function(){e(v)}}})(T)),G=a(33),R=a(15),x=a(2),P=a(83),B=(a(74),function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(L.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={loggedIN:!1},a}return Object(N.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"LoginBox"},r.a.createElement("form",{name:"login"},r.a.createElement("input",{onChange:this.props.handleChange,value:this.username,name:"username",type:"text"}),r.a.createElement("button",{onClick:this.props.handleLogin},"Login"),r.a.createElement("button",{onClick:this.props.createUser},"Create Username")))}}]),t}(n.Component)),K=function(e){function t(e){var a;return Object(D.a)(this,t),(a=Object(L.a)(this,Object(w.a)(t).call(this,e))).state={username:"",loggedIn:!1},a.handleChange=a.handleChange.bind(Object(x.a)(Object(x.a)(a))),a.handleLogin=a.handleLogin.bind(Object(x.a)(Object(x.a)(a))),a.handleCreateUsername=a.handleCreateUsername.bind(Object(x.a)(Object(x.a)(a))),a}return Object(N.a)(t,e),Object(U.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(R.a)({},a,n))}},{key:"handleLogin",value:function(e){var t;e.preventDefault(),console.log("test"),this.setState((t=this.state.username,function(e){p.a.post("/api/v1/users/login",{user:{username:t}}).then(function(e){if(!e)return t;E.dispatch({type:"LOGIN",user:e.data}),console.log(e.data)})}))}},{key:"handleCreateUsername",value:function(e){if(e.preventDefault(),this.state.username===/\W?/)return r.a.createElement("p",null,"Please only use letters, numbers, and underscores. No spaces or special characters. :)");this.setState(k(this.state.username)),console.log("Created user: ".concat(this.state.username))}},{key:"render",value:function(){return!0===this.props.loggedIn?r.a.createElement(P.a,{to:"/decks"}):r.a.createElement("div",{className:"user"},this.props.loggedIn?r.a.createElement("button",{onClick:this.handleLogout},"Logout"):r.a.createElement(B,{handleLogin:this.handleLogin,createUser:this.handleCreateUsername,handleChange:this.handleChange}))}}]),t}(n.Component),W=Object(A.a)(Object(i.b)(function(e){return{user:e.user,loggedIn:e.loggedIn}},{createUser:k})(K)),V=(a(23),function(e,t){return t.types.includes("Land")&&e++,e}),Y=function(e){function t(){return Object(D.a)(this,t),Object(L.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"deckSummary"},this.props.loggedIn?r.a.createElement("div",null,r.a.createElement("h2",null,this.props.deck.name),r.a.createElement("span",null,r.a.createElement("h3",null,"Click ",r.a.createElement(S.a,{to:{pathname:"/deck",state:{deck:this.props.deck}}},"Here")," to add cards!")),r.a.createElement("span",null,this.props.deck.cards.length," Cards")," - ",r.a.createElement("span",null,this.props.deck.cards.reduce(V,0)," Lands")):r.a.createElement("p",null,"Please ",r.a.createElement(S.a,{to:"/"},"login")," to view a deck!"))}}]),t}(n.Component),H=Object(A.a)(Object(i.b)(function(e){return{user:e.user,loggedIn:e.loggedIn}})(Y)),J=function(e){function t(e){var a;return Object(D.a)(this,t),(a=Object(L.a)(this,Object(w.a)(t).call(this,e))).state={loading:!0,loggedIn:!1,currentUser:{decks:""},decks:""},a.handleCreateDeck=a.handleCreateDeck.bind(Object(x.a)(Object(x.a)(a))),a.handleChange=a.handleChange.bind(Object(x.a)(Object(x.a)(a))),a}return Object(N.a)(t,e),Object(U.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(R.a)({},a,n))}},{key:"handleCreateDeck",value:function(e){var t,a;console.log("Created user deck: ".concat(this.state.deckName)),e.preventDefault(),this.setState((t=this.state.deckName,a=this.state.deckDescription,function(e){p.a.post("/api/v1/decks",{deck:{name:t,description:a,user_id:E.getState().currentUser.id}}).then(function(e){e?E.dispatch({type:"CREATE_DECK",deck:e.data}):console.log(e.data)})}))}},{key:"render",value:function(){return this.props.loggedIn&&this.props.currentUser.decks?r.a.createElement("div",{className:"decks"},r.a.createElement("h4",null,"Your Saved Decks"),this.props.currentUser.decks.map(function(e,t){return r.a.createElement(H,{key:e.name+t,deck:e})})):this.props.loggedIn?r.a.createElement("div",{className:"createDeck"},r.a.createElement("h3",null,"You don't have any decks yet. Build one here to begin."),r.a.createElement("form",null,"Enter a name for your new deck:",r.a.createElement("input",{placeholder:"Required",type:"text",name:"deckName",value:this.deckName,onChange:this.handleChange}),r.a.createElement("br",null),"Enter a description:",r.a.createElement("input",{placeholder:"Optional",type:"text",name:"deckDescription",value:this.deckDescription,onChange:this.handleChange}),r.a.createElement("button",{onClick:this.handleCreateDeck},"Create"))):r.a.createElement("h3",null,r.a.createElement("b",null,"Please ",r.a.createElement(S.a,{to:"/"},"login")," to view decks!"))}}]),t}(n.Component),M=Object(A.a)(Object(i.b)(function(e){return{currentUser:e.currentUser,loggedIn:e.loggedIn,decks:e.decks}})(J)),q=function(e){function t(){var e,a;Object(D.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(L.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).state={username:a.props.username,loggedIn:a.props.loggedIn,response:""},a}return Object(N.a)(t,e),Object(U.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},this.props.loggedIn?r.a.createElement(G.a,{path:"/decks",render:function(e){return r.a.createElement(M,null)}}):r.a.createElement(W,null),r.a.createElement("p",null,this.state.response))}}]),t}(n.Component),z=Object(A.a)(Object(i.b)(function(e){return{user:e.user}})(q)),F=function(e){function t(){return Object(D.a)(this,t),Object(L.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.props.card.name&&r.a.createElement("div",{id:"card",className:"wrapper"},r.a.createElement("h1",null,this.props.card.name),r.a.createElement("h2",null,this.props.card.colors.join(", ")),r.a.createElement("img",{src:this.props.card.image,alt:this.props.card.name}),r.a.createElement("p",null,this.props.card.description)))}}]),t}(n.Component),Q=Object(A.a)(Object(i.b)(function(e){return e})(F)),X=function(e){function t(){var e;return Object(D.a)(this,t),(e=Object(L.a)(this,Object(w.a)(t).call(this))).types=["Artifact","Conspiracy","Creature","Enchantment","Instant","Land","Phenomenon","Plane","Planeswalker","Scheme","Sorcery","Tribal","Vanguard"],e.state={name:"",colors:"",cardType:"",showLogin:!1},e.handleChange=e.handleChange.bind(Object(x.a)(Object(x.a)(e))),e.handleSubmit=e.handleSubmit.bind(Object(x.a)(Object(x.a)(e))),e.showLogin=e.showLogin.bind(Object(x.a)(Object(x.a)(e))),e}return Object(N.a)(t,e),Object(U.a)(t,[{key:"handleChange",value:function(e){this.setState(Object(R.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){alert("Your favorite flavor is: "+this.state.colors),e.preventDefault()}},{key:"showLogin",value:function(){this.setState({showLogin:!0})}},{key:"render",value:function(){return r.a.createElement("div",{id:"cardSearch"},r.a.createElement("form",null,r.a.createElement("label",null,"Color:"),r.a.createElement("select",{name:"colors",value:this.state.colors,onChange:this.handleChange},r.a.createElement("option",{value:""},"Any"),r.a.createElement("option",{value:"White"},"White"),r.a.createElement("option",{value:"Black"},"Black"),r.a.createElement("option",{value:"Blue"},"Blue"),r.a.createElement("option",{value:"Red"},"Red"),r.a.createElement("option",{value:"Green"},"Green")),r.a.createElement("label",null,"Type:"),r.a.createElement("select",{name:"cardType",value:this.state.cardType,onChange:this.handleChange},r.a.createElement("option",{value:""},"Any"),this.types.map(function(e,t){return r.a.createElement("option",{key:e+t,value:e},e)})),r.a.createElement("br",null),r.a.createElement("label",null,"Name:"),r.a.createElement("input",{type:"text",name:"name",value:this.state.name,onChange:this.handleChange})),r.a.createElement("button",{id:"find-card-button",onClick:f({name:"name",value:this.state.name},{name:"colors",value:this.state.colors},{name:"type",value:this.state.cardType})},"Generate Card"),r.a.createElement("br",null),this.props.loggedIn?r.a.createElement("button",{id:"deck-button",onClick:O(this.props.foundCard,this.props.deckId)},"I want it!"):this.state.showLogin?r.a.createElement(W,null):r.a.createElement("h4",null,"Please ",r.a.createElement("a",{onClick:this.showLogin},"login")," to create decks and play!"))}}]),t}(n.Component),Z=Object(A.a)(Object(i.b)(function(e){return e},function(e){return{getCard:function(t){e(f(t))},addToDeck:function(){e(O)}}})(X)),$=function(e,t){return t.types.includes("Land")&&e++,e},ee=function(e,t){return t.types.includes("Creature")&&e++,e},te=function(e){function t(){return Object(D.a)(this,t),Object(L.a)(this,Object(w.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(U.a)(t,[{key:"render",value:function(){console.log("Props: ",this.props),console.log("State: ",this.props.location.state);var e={};if(!0===this.props.loggedIn){var t=this.props.location.state.deck._id;e=this.props.currentUser.decks.filter(function(e){return e._id===t})[0]}return r.a.createElement("div",{className:"deck"},this.props.loggedIn?r.a.createElement("div",{className:"searchWithDeck"},r.a.createElement("div",{className:"searchDetails"},r.a.createElement(Z,{deckId:e._id})),r.a.createElement("div",{className:"cardDetails"},r.a.createElement("div",{className:"cardGrid"},r.a.createElement("div",{id:"leftInfo"},console.log("finded cards: ",this.props.foundCard)),r.a.createElement(Q,{card:this.props.foundCard}),r.a.createElement("div",{id:"rightInfo"},this.props.foundCard.text))),r.a.createElement("div",{className:"deckDetails"},r.a.createElement("h1",null,e.name),r.a.createElement("span",null,e.cards.length," Cards")," -",r.a.createElement("span",null,e.cards.reduce($,0)," Lands")," -",r.a.createElement("span",null,e.cards.reduce(ee,0)," Creatures"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("span",null,r.a.createElement("button",{onClick:function(e,t){return function(a){p.a.put("/api/v1/decks/"+e.id,{deck:{cards:Object(u.a)(e.cards).concat(Object(u.a)(t))}}).then(function(e){e&&E.dispatch({type:"SAVE_DECK",decks:e.data})})}}()},"Save")),r.a.createElement("div",{className:"viewOfDeck"},e.cards.map(function(e,t){return r.a.createElement(Q,{key:e.name+t,card:e})})))):r.a.createElement("p",{className:"loginNote"},"Please ",r.a.createElement(S.a,{to:"/"},"login")," to view a deck!"))}}]),t}(n.Component),ae=Object(A.a)(Object(i.b)(function(e){return{currentUser:e.currentUser,loggedIn:e.loggedIn,foundCard:e.foundCard}})(te));a(77);Object(c.render)(r.a.createElement(l.a,null,r.a.createElement(i.a,{store:j},r.a.createElement("div",null,r.a.createElement(_,null),r.a.createElement(s.a,null,r.a.createElement(o.a,{path:"/",exact:!0,component:z}),r.a.createElement(o.a,{path:"/decks",render:M}),r.a.createElement(o.a,{path:"/deck",component:ae}))))),document.getElementById("root"))}},[[40,2,1]]]);
//# sourceMappingURL=main.1cd5db5a.chunk.js.map